# Chapter10. λ°°μ—΄κ³Ό ν¬μΈν„°

## λ°°μ—΄κ³Ό ν¬μΈν„°μ κ΄€κ³„

λ°°μ—΄μ€ μλ£ν•μ΄ κ°™μ€ λ³€μλ¥Ό λ©”λ¨λ¦¬μ— μ—°μ†μΌλ΅ ν• λ‹Ήν•λ―€λ΅, κ° λ°°μ—΄ μ”μ†λ” **μΌμ •ν• κ°„κ²©**μΌλ΅ μ£Όμ†λ¥Ό κ°–κ² λλ‹¤.

```c
int ary[5];
```

<img src="../images/img12.png" alt="λ°°μ—΄ μ”μ†μ μ£Όμ†" width=400 />

μ¦‰, μ²« λ²μ§Έ μ”μ†μ μ£Όμ†λ¥Ό μ•λ©΄ λ‚λ¨Έμ§€ μ”μ†μ μ£Όμ†λ„ μ‰½κ² μ• μ μλ‹¤. μ»΄νμΌλ¬λ” μ»΄νμΌ κ³Όμ •μ—μ„ λ°°μ—΄λ…(`ary`)μ„ μ²« λ²μ§Έ λ°°μ—΄ μ”μ†μ μ£Όμ†(`100`)λ΅ λ³€κ²½ν•λ‹¤. κ²°κµ­ **λ°°μ—΄λ…μ€ μ²« λ²μ§Έ λ°°μ—΄ μ”μ†λ¥Ό κ°€λ¦¬ν‚¤κ²** λλ‹¤.

### λ°°μ—΄λ…μΌλ΅ λ°°μ—΄ μ”μ† μ‚¬μ©ν•κΈ°

- μ£Όμ†μ— λ€ν• μ •μ λ§μ…μ€ λ‹¤μκ³Ό κ°™μ΄ μν–‰λλ‹¤.

  ```c
  μ£Όμ† + μ •μ π‘‰ μ£Όμ† + (μ •μ * μ£Όμ†λ¥Ό κµ¬ν• λ³€μμ ν¬κΈ°)
  ```

  <details>
  <summary>μ) intν• λ³€μ `a`μ μ£Όμ† 100λ²μ§€μ— 1μ„ λ”ν•λ©΄?</summary>
  <div markdown="1">

  `&a` + (1 * `sizeof(int)`) = 100 + 4 = **104**

  </div>
  </details>

- μ΄λ¬ν• μ—°μ‚° κ·μΉ™μ€ λ°°μ—΄μ„ μ‚¬μ©ν•  λ• μ μ©ν•λ‹¤. μ•μ„ μ‚΄ν΄λ΄¤λ“―μ΄ λ°°μ—΄λ…λ„ κ²°κµ­ μ£Όμ†μ΄λ―€λ΅, λ°°μ—΄λ…μ— μ •μλ¥Ό μ°¨λ΅€λ΅ λ”ν•λ©΄ μ—°μ†λ λ°°μ—΄ μ”μ†μ μ£Όμ†λ¥Ό κµ¬ν•  μ μλ‹¤. (κ·Έλ¦¬κ³  μ΄λ ‡κ² κµ¬ν• κ° λ°°μ—΄ μ”μ†μ μ£Όμ†λ¥Ό κ°„μ ‘ μ°Έμ΅°(μ—­μ°Έμ΅°)ν•λ©΄ κ° λ°°μ—΄ μ”μ†λ„ μ‚¬μ©ν•  μ μκ² λλ‹¤.)

  |λ°°μ—΄λ…μ— λ§μ… μ—°μ‚°|κ° λ°°μ—΄ μ”μ†μ μ£Όμ†|κ° λ°°μ—΄ μ”μ†|
  |------|---|---|
  |`*(ary + 0)`|`*(100)`|`ary[0]`|
  |`*(ary + 1)`|`*(104)`|`ary[1]`|
  |`*(ary + 2)`|`*(108)`|`ary[2]`|

### λ°°μ—΄λ… μ—­ν• μ„ ν•λ” ν¬μΈν„°

- λ°°μ—΄λ…λ„ κ²°κµ­ μ£Όμ†μ΄λ―€λ΅ ν¬μΈν„°μ— μ €μ¥ν•  μ μλ‹¤. μ΄λ ‡κ² λ°°μ—΄λ…μ„ μ €μ¥ν• ν¬μΈν„°λ” λ°°μ—΄μ²λΌ μ‚¬μ©ν•  μ μλ‹¤.

  ```c
  #include <stdio.h>

  int main(void) {
      int ary[3];
      int *pa = ary; // ν¬μΈν„°μ— λ°°μ—΄λ… μ €μ¥

      *pa = 1; // aryμ μ²« λ²μ§Έ μ”μ†μ— 1 λ€μ…
      *(pa + 1) = 2; // aryμ λ‘ λ²μ§Έ μ”μ†μ— 2 λ€μ…
      pa[2] = pa[0] + pa[1]; // ν¬μΈν„°μ— λ€κ΄„νΈλ¥Ό μ¨μ„ λ°°μ—΄λ…μ²λΌ μ‚¬μ©

      int cnt = sizeof(ary) / sizeof(ary[0]); // λ°λ³µ νμ
      int i; // λ°λ³µ μ μ–΄ λ³€μ
      for (i = 0; i < cnt; i++) {
          // ν¬μΈν„°λ΅ λ¨λ“  λ°°μ—΄ μ”μ† μ¶λ ¥
          printf("%-5d", pa[i]);
      }
      // 1    2    3
      printf("\n");

      return 0;
  }
  ```

  - μ°Έκ³ λ΅ μ—¬κΈ°μ„ λ³€ν™ λ¬Έμ `%d` μ•μ— μ«μλ” μ«μ μλ¦¬μλ¥Ό μλ―Έν•λ‹¤. μ΄λ ‡κ² μ§€μ •ν• μλ¦¬μλ³΄λ‹¤ μ μ€ μ«μκ°€ μ¤λ©΄, κ·Έ λΉ μλ¦¬λ§νΌ κ³µλ°±μ΄ μƒκΈ΄λ‹¤. μμλ¥Ό μ§€μ •ν•λ©΄ μ«μκ°€ μ™Όμ½ μ •λ ¬(μ¤λ¥Έμ½μ— κ³µλ°± μ¶”κ°€)λκ³ , μ–‘μλ¥Ό μ§€μ •ν•λ©΄ μ«μκ°€ μ¤λ¥Έμ½ μ •λ ¬(μ™Όμ½μ— κ³µλ°± μ¶”κ°€)λλ‹¤. μ¶λ ¥ κ°’μ„ μ‚΄ν΄λ³΄λ©΄,

    `1    2    3    `

    μΌλ‹¨ μμλ‹κΉ μ«μκ°€ μ™Όμ½ μ •λ ¬λμ—λ‹¤. κ·Έλ¦¬κ³  5μλ¦¬λΌκ³  μ§€μ •ν–λ”λ°, μ«μκ°€ κ°κ° ν•μλ¦¬μ”© λ°–μ— μ•λκΈ° λ•λ¬Έμ— λ‚λ¨Έμ§€ 4μλ¦¬μ—λ” κ³µλ°±μ΄ μ¶”κ°€λμ—λ‹¤.

### λ°°μ—΄λ…κ³Ό ν¬μΈν„°μ μ°¨μ΄

- μ΄μ™€ κ°™μ΄ ν¬μΈν„°κ°€ λ°°μ—΄λ…μ²λΌ μ‚¬μ©λ  μλ” μμ§€λ§ λ‡ κ°€μ§€ μ°¨μ΄μ μ΄ μμ–΄μ„, μ‚¬μ©ν•  λ• μ£Όμν•΄μ•Ό ν•λ‹¤.

  - μ°¨μ΄μ 1: `sizeof` μ—°μ‚°μ κ²°κ³Όκ°€ λ‹¤λ¥΄λ‹¤.

    - `sizeof` μ—°μ‚°μλ¥Ό λ°°μ—΄λ…μ— μ‚¬μ©ν•λ©΄ **λ°°μ—΄ μ „μ²΄μ ν¬κΈ°**λ¥Ό κµ¬ν•λ” λ°λ©΄, ν¬μΈν„°μ— μ‚¬μ©ν•λ©΄ **ν¬μΈν„° ν•λ‚μ ν¬κΈ°**λ§μ„ κµ¬ν•λ‹¤.

      ```c
      int ary[3];
      int *pa = ary;

      sizeof(ary); // 4 * 3 = 12
      sizeof(pa); // 8
      ```

    - μ¦‰, λ°°μ—΄λ…μΌλ΅ μ‚¬μ©ν•λ” ν¬μΈν„°μ— `sizeof` μ—°μ‚°μ„ ν•΄μ„ ν•΄λ‹Ή λ°°μ—΄μ μ „μ²΄ ν¬κΈ°λ¥Ό κµ¬ν•λ” κ²ƒμ€ λ¶κ°€λ¥ν•λ‹¤.

  - μ°¨μ΄μ 2: λ³€μ/μƒμ μ°¨μ΄

    - ν¬μΈν„°λ” μ•μ„ 9μ¥μ—μ„ μ‚΄ν΄λ³΄μ•λ“―μ΄ λ³€μλ‹¤. (μ£Όμ† κ°’μ„ μ €μ¥ν•λ” μ©λ„λ΅ μ“°μ΄λ” λ³€μ) λ°λ©΄ λ°°μ—΄λ…μ€ μƒμμ΄λ―€λ΅, κ°’μ„ λ³€κ²½ν•  μ μ—†λ‹¤.

      ```c
      pa += 1; (O)
      pa++; (O)

      ary += 1; (X)
      ary++; (X)
      ```

### ν¬μΈν„°μ λΊ„μ…κ³Ό κ΄€κ³„ μ—°μ‚°

- μ–΄λ–¤ λ‘ ν¬μΈν„°κ°€ **κ°€λ¦¬ν‚¤λ” μλ£ν•μ΄ λ™μΌ**ν•λ‹¤λ©΄, ν¬μΈν„° κ°„ λΊ„μ…λ„ κ°€λ¥ν•λ‹¤.

  ```c
  ν¬μΈν„° - ν¬μΈν„° π‘‰ μ£Όμ† κ°’μ μ°¨ / κ°€λ¦¬ν‚¤λ” μλ£ν•μ ν¬κΈ°
  ```

  μ) `pi`κ°€ intν• μ”μ†λ¥Ό λ‹΄λ” λ°°μ—΄μ„ κ°€λ¦¬ν‚¬ λ•,

    ```c
    int diff = (pa + 1) - pa;
    printf("diff: %d\n", diff); // 1
    ```

    λ§μ•½ `pa`κ°€ 100, `pa + 1`μ΄ 104λΌλ©΄, 104 - 100 = 4κ°€ λλ‹¤. κ·Έλ¦¬κ³  intν•μ ν¬κΈ°λ” 4μ΄λ―€λ΅ 4/4 = 1μ΄ λλ‹¤.

- κ΄€κ³„ μ—°μ‚°μλ΅ ν¬μΈν„° κ°„μ λ€μ†κ΄€κ³„λ„ ν™•μΈν•  μ μλ‹¤.

  ```c
  if (pa < pb) {
    ...
  }
  ```

  - λ°°μ—΄μ€ λ°°μ—΄ μ”μ†κ°€ λ©”λ¨λ¦¬μ— μμ„λ€λ΅ ν• λ‹Ήλλ―€λ΅, μ•μ λ°°μ—΄ μ”μ†μ μ£Όμ† κ°’μ΄ λ’¤μ λ°°μ—΄ μ”μ†μ μ£Όμ† κ°’λ³΄λ‹¤ μ‘λ‹¤.

## λ°°μ—΄μ„ μ²λ¦¬ν•λ” ν•¨μ

### λ°°μ—΄μ κ°’μ„ μ¶λ ¥ν•λ” ν•¨μ

- λ°°μ—΄μ κ°’μ„ ν™•μΈν•κΈ° μ„ν•΄ μμ‹λ΅ μ¶λ ¥ν•΄μ•Ό ν•λ‹¤λ©΄, κ·Έ κΈ°λ¥μ„ λ³„λ„μ ν•¨μλ΅ μ¶”μ¶ν•μ—¬ νΈμ¶ν•λ©΄ λλ‹¤.

- μ΄λ•, μ²« λ²μ§Έ λ°°μ—΄ μ”μ†μ μ£Όμ†λ§ μ•λ©΄ λ‚λ¨Έμ§€ λ°°μ—΄ μ”μ†λ“¤μ€ ν¬μΈν„° μ—°μ‚°μΌλ΅ μ‚¬μ©ν•  μ μλ‹¤. λ”°λΌμ„ ν•¨μλ¥Ό νΈμ¶ν•  λ•λ” ν•¨μμ λ§¤κ°λ³€μλ΅ ν¬μΈν„°λ¥Ό μ„ μ–Έν•λ©΄ λκ³ , μ΄λ ‡κ² λ§¤κ°λ³€μλ¥Ό ν†µν•΄ μ „λ‹¬ λ°›μ€ ν¬μΈν„°λ” ν•¨μ λ‚΄μ—μ„ λ°°μ—΄λ…μ²λΌ μ‚¬μ©ν•λ©΄ λλ‹¤.

  ```c
  #include <stdio.h>

  // ν•¨μ μ„ μ–Έ
  void print_array(int *p, int cnt);

  int main(void) {
      int ary[3] = { 100, 200, 300 };
      int *pa = ary;
      int cnt = sizeof(ary) / sizeof(ary[0]);

      print_array(pa, cnt);
      // 100  200  300  

      return 0;
  }

  // ν•¨μ μ •μ
  void print_array(int *p, int cnt) {
      int i;
      for (i = 0; i < cnt; i++) {
          printf("%-5d", p[i]);
      }
      printf("\n");
  }
  ```

- μ΄μ™€ κ°™μ΄ μ–΄λ–¤ ν•¨μμ μΈμλ΅ λ°°μ—΄ κ·Έ μμ²΄κ°€ μ•„λ‹λΌ λ°°μ—΄μ ν¬μΈν„°λ¥Ό λ„κ²¨μ£Όλ” λ°©μ‹μ€, λ°°μ—΄μ— μλ” λ€λ‰μ λ°μ΄ν„°λ¥Ό λ‹¤λ¥Έ ν•¨μλ΅ λ³µμ‚¬ν•μ§€ μ•κ³ λ„ μ ‘κ·Όν•  μ μμ–΄ λ” ν¨μ¨μ μ΄λ‹¤. λ‹¤λ§, μ£Όμ†λ§ μ•λ©΄ ν•΄λ‹Ή μ„μΉμ κ°’μ„ λ°”κΏ€ μλ„ μκΈ° λ•λ¬Έμ— μλ„μΉ μ•κ² κ°’μ„ λ³€ν•ν•λ” μΌμ΄ μ—†λ„λ΅ μ£Όμν•΄μ•Ό ν•λ‹¤. π‘‰ `const` ν¬μΈν„°λ¥Ό μ‚¬μ©ν•μ—¬ μλ„μΉ μ•μ€ κ°’μ λ³€ν•μ„ λ°©μ§€ν•λ‹¤.

  ```c
  // ν•¨μ μ •μ
  void print_array(const int *p, int cnt) {
      int i;
      for (i = 0; i < cnt; i++) {
          printf("%-5d", p[i]);
      }
      printf("\n");
  }
  ```

### ν•¨μμ λ§¤κ°λ³€μ μλ¦¬μ— λ°°μ—΄μ„ μ„ μ–Έν•λ” κ²½μ°

- ν•¨μμ λ§¤κ°λ³€μ μλ¦¬μ— λ°°μ—΄μ„ μ„ μ–Έν•λ©΄, λ°°μ—΄μ μ €μ¥ κ³µκ°„μ΄ ν• λ‹Ήλμ§€ μ•κ³  λ°°μ—΄λ…μ€ μ»΄νμΌ κ³Όμ •μ—μ„ μ²« λ²μ§Έ λ°°μ—΄ μ”μ†λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°λ΅ λ°”λ€κ² λλ‹¤. λ”°λΌμ„ λ§¤κ°λ³€μ μλ¦¬μ— μ„ μ–Έλ λ°°μ—΄μ—μ„ λ°°μ—΄ μ”μ†μ κ°μλ” μλ―Έκ°€ μ—†μΌλ©° μƒλµλ„ κ°€λ¥ν•λ‹¤.

  | - | - |
  |------|---|
  |`void func(int pa[5]) {...}`|`void func(int *pa) {...}`|
  |`void func(int pa[10]) {...}`|`void func(int *pa) {...}`|
  |`void func(int pa[]) {...}`|`void func(int *pa) {...}`|

- μ΄μ™€ κ°™μ΄, λ§¤κ°λ³€μ μλ¦¬μ— μ„ μ–Έλ λ°°μ—΄μ€ ν¬μΈν„°λ΅ λ°”λ€κΈ° λ•λ¬Έμ— ν•¨μ μ•μ—μ„ `sizeof` μ—°μ‚°μλ΅ λ°°μ—΄μ ν¬κΈ°λ¥Ό μ• μ μ—†λ‹¤.
